---
title: 下一代数据中心云操作系统 kubernetes
date: 2019-12-01 11:06:42
author: "Mayer Shi"
tags: ["kubernetes"]
categories: ["Container Cloud"]
---

云时代中的佼佼者k8s的系列高质量干货文章，其中包含基础概念、组件原理、基本使用、生态工具、以及生产中的最佳实践。

<!--more-->

### 本篇前言
在开源领域长期霸持数据中心核心地位非Linux莫属，但是随着云计算的崛起以及开源世界大公司不断加入诞生了新一代数据中心云操作系统k8s，可以毫不夸张的说k8s是开源世界一款伟大产品。

#### kubernetes 是什么？

Kubernetes是一个可移植，可扩展的开源平台，用于管理容器化工作负载和服务，有助于声明性配置和自动化。它拥有庞大，快速发展的生态系统。Kubernetes服务，支持和工具广泛可用。

Kubernetes这个名字源于希腊语，意思是舵手或飞行员。谷歌在2014年开放了Kubernetes项目.Kubernetes建立在谷歌拥有大量运行生产工作量的十五年经验的基础上，结合了社区中的最佳创意和实践。

**IT应用运维变迁**

透过IT应用运维的变迁，让我们来看看为什么Kubernetes如此有用和伟大。

下一代数据中心云操作系统 kubernetes「容器云连载」

**物理机部署时代**： 早期，在物理服务器上运行应用程序。无法为物理服务器中的应用程序定义资源边界，这会导致资源浪费问题。例如，如果在物理服务器上运行多个应用程序，则可能存在一个应用程序占用大部分资源的情况，因此其他应用程序会受到影响。解决方案是在不同的物理服务器上运行不同应用程序。但是由于资源未得到充分利用，并且扩展性很差，企业维护许多物理服务器的成本很高。

**虚拟化部署时代**：为了解决资源利用率的问题，引入了虚拟化。它允许您在单个物理服务器的CPU上运行多个虚拟机（VM）。虚拟化允许应用程序在VM之间隔离，并提供一定程度的安全性，因为另一个应用程序无法随便访问另外一VM上运行应用程序的信息。

虚拟化可以更好地利用物理服务器中的资源，也可以实现更好的可扩展性，快速添加或更新应用程序，降低硬件成本等等优点。

每个VM都是在虚拟化硬件之上运行包含所有组件（包括其自己的操作系统）的完整操作系统。

**容器部署时代**：容器类似于VM，但它们属于轻量级虚拟化，隔离性相对宽松。多个应用程序容器之间共享宿主操作系统（OS）。与VM类似，容器具有自己的文件系统，CPU，内存，进程空间等。当它们与底层基础架构分离时，它们可以跨云和OS分发进行移植。

**容器的优势**

- 敏捷应用程序创建和部署：与VM映像使用相比，增加了容器镜像创建的简便性和效率。
- 持续开发，集成和部署：通过快速简便的回滚（由于镜像不变性）提供可靠且频繁的容器镜像构建和部署。
- Dev和Ops关注点分离：在构建/发布时而不是部署时创建应用程序容器镜像，从而将应用程序与基础架构分离。
- 开发，测试和生产的环境一致性：在笔记本电脑上运行与在云中运行相同。
- 云和操作系统分发可移植性：在Ubuntu，RHEL，CoreOS，本地，阿里云，腾讯云和其他任何地方都可以运行。
- 以应用程序为中心的管理：提高在虚拟硬件上运行OS的抽象级别，以及使用逻辑资源在OS上运行应用程序。
- 资源隔离与利用：可预测的应用程序性能，高效率和高密度。

### 为什么需要kubernetes 以及用它能做什么？
在生产环境中，您需要管理运行应用程序的容器并确保没有停机时间。例如，如果容器发生故障，则需要启动另一个容器，添加负载均衡等一系列动作。如果这些直接交给一个系统去处理，会不会更高效和便捷？

kubernetes 就是很好解决了包含以上所说各种问题的系统 ！Kubernetes为您提供了一个弹性运行分布式系统的框架。它可以管理应用的扩展，故障转移，负载均衡等。例如，Kubernetes可以轻松管理应用系统的canary发布。k8s 提供如下有用特性：

- **服务发现和负载平衡**

Kubernetes可以使用内部DNS名称或使用自己的IP地址提供服务入口。如果容器的流量很高，Kubernetes能够负载均衡并分配网络流量，确保应用可以稳定提供服务。

- **存储编排**

Kubernetes允许您自动安装您选择的存储系统，例如本地存储，公共云提供商等。

- **自动部署和回滚**

您可以使用Kubernetes描述已部署容器的所需状态，并且可以控制速率将实际状态更改为所需状态。例如，您可以控制Kubernetes为您的deploy自动创建新容器，删除现有容器并将所有资源用于新容器。

- **自我修复与高可用**

Kubernetes重新启动失败的容器，替换容器，杀死不响应用户定义的运行状况检查的容器，并且服务没有真正运行就绪前不会提前暴露给调用客户端。

- **密钥和配置管理**

Kubernetes允许您存储和管理敏感信息，例如密码，OAuth令牌和ssh密钥。您可以部署和更新秘钥和应用程序配置，而无需重建容器镜像，也不会在应用程序中暴露秘钥。

